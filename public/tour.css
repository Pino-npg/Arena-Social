/* -------- RESET & BASE -------- */
* { margin:0; padding:0; box-sizing:border-box; }
html, body, #game-container { 
  min-height:100%; width:100%; 
  font-family:'Cinzel', serif; 
  color:#f5f5f5;
  background: url("img/Arena.webp") center/cover no-repeat; 
  overflow-y:auto; 
}

/* -------- HEADER -------- */
header {
  width: 100%;
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 10px;
  padding: 0 20px;
}

#header-left, #header-right {
  display: flex;
  align-items: center;
  gap: 10px;
}

#online-count {
  font-size: 1.2rem;
  color: white;
  text-shadow: 1px 1px 4px black;
}

#home-btn, #trophy-btn {
  font-size: 1.5rem;
  cursor: pointer;
  background: transparent;
  border: none;
  color: white;
  transition: color 0.3s;
}
#home-btn:hover, #trophy-btn:hover {
  color: gold;
}

.arena-title {
  font-size: 3rem;
  color: white;
  text-shadow: 2px 2px 8px black;
  text-align: center;
}

/* -------- MAIN AREA -------- */
#main-area { 
  display:flex; flex-direction:column; align-items:center; width:100%; flex-grow:1; gap:20px; padding:0 10px; 
}
#battle-area { 
  display:flex; flex-wrap:wrap; justify-content:center; gap:20px; width:100%; 
}

/* -------- SIDE BOXES -------- */
#bottom-area { 
  width:100%; display:flex; gap:10px; padding:10px; background:rgba(0,0,0,0.6); border-top:1px solid #444;
}
.side-box { 
  flex:1; background:#222; border:1px solid #444; padding:8px; display:flex; flex-direction:column; max-height:12em; 
  overflow:hidden;
}
.side-box h3 { margin:0 0 5px 0; font-size:0.9rem; text-align:center; }
#chat-messages, #event-messages { 
  flex:1; overflow-y:auto; font-size:0.85rem; display:flex; flex-direction:column; gap:2px; padding:2px; 
}
#chat-input { 
  border:none; padding:4px; font-size:0.85rem; outline:none; margin-top:5px; background:#333; color:white; height:1.8em; 
}

/* -------- PLAYER BOX -------- */
.match-container { 
  display:flex; justify-content:center; align-items:flex-end; gap:20px; width:100%; flex-wrap:wrap; 
}
.player { 
  display:flex; flex-direction:column; align-items:center; width:45%; position:relative; background:rgba(0,0,0,0.4); padding:5px; border-radius:8px;
}
.player img.char-img { width:180px; max-width:100%; object-fit:contain; margin-top:10px; transition: transform 0.3s; }
.player-label { 
  text-align:center; font-size:1.5rem; margin-bottom:5px; color:gold; text-shadow:1px 1px 4px black; 
}
.hp-bar { 
  width:100%; height:20px; background:#444; border:2px solid #222; border-radius:5px; overflow:hidden; margin-top:10px; 
}
.hp { 
  height:100%; width:100%; background:linear-gradient(90deg,green,lime); transition:width 0.3s ease-in-out; 
}
.dice { width:60px; height:60px; margin:10px auto; }

/* -------- WINNER IMAGE -------- */
#winnerImage {
  display:none;
  max-width:90%;
  height:auto;
  margin:20px auto;
  position:fixed;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  z-index:2000;
  pointer-events:none;
}

/* -------- OVERLAY / BRACKET -------- */
#tournament-overlay { 
  position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.85); 
  display:flex; justify-content:center; align-items:center; z-index:1000; 
  overflow-y:auto; padding:20px;
}
#tournament-overlay.hidden { display:none; }
#tournament-board { 
  background:#111; padding:20px; border:2px solid gold; width:100%; max-width:800px; text-align:center; border-radius:10px;
}
#bracket { display:flex; flex-direction:column; gap:10px; margin-top:10px; max-height:60vh; overflow-y:auto; }
#close-overlay { margin-top:10px; font-size:1.2rem; padding:5px 10px; cursor:pointer; background:#333; color:white; border:none; border-radius:5px; }
#close-overlay:hover { background:gold; color:black; }

/* -------- ANIMAZIONI EVENTI -------- */
@keyframes effectFade {
  0% { opacity:1; transform: translate(-50%,-50%) translateY(0); }
  100% { opacity:0; transform: translate(-50%,-50%) translateY(-30px); }
}
.event-effect {
  position:absolute; left:50%; top:50%; transform:translate(-50%,-50%);
  font-size:2rem; pointer-events:none;
  animation: effectFade 1s forwards;
}

/* -------- MOBILE / RESPONSIVE -------- */
@media (max-width:768px){
  #bottom-area { flex-direction:column; }
  .side-box { max-width:100%; max-height:8em; }

  .match-container {
    flex-wrap: wrap;
    justify-content: space-between;
    gap: 8px;
  }

  .player {
    flex: 1 1 45%;    /* met√† schermo */
    min-width: 140px; /* evita troppo stretto */
    max-width: 48%;
  }

  .player img.char-img { width:130px; }
  .player-label { font-size:1.1rem; }
  .dice { width:50px; height:50px; }
}

/* MOBILE LANDSCAPE LARGHI */
@media (min-width:414px) and (max-width:768px) and (orientation: landscape){
  .match-container {
    flex-wrap: wrap;
    justify-content: space-evenly;
  }
  .player { 
    flex: 1 1 40%; 
    max-width:40%; 
    min-width:140px; 
  }
  .player img.char-img { width:140px; }
  .player-label { font-size:1.2rem; }
}
/* -------- HP BAR DINAMICA -------- */
.hp-bar {
  width: 100%;
  height: 20px;
  background: #444;
  border: 2px solid #222;
  border-radius: 5px;
  overflow: hidden;
  margin-top: 10px;
}

.hp {
  height: 100%;
  width: 100%;
  background: linear-gradient(90deg, green, lime);
  transition: width 0.5s ease-in-out, background 0.5s ease-in-out;
}

/* Cambia colore in base alla percentuale di HP */
.hp[style*="width: 100%"], 
.hp[style*="width: 99%"], 
.hp[style*="width: 98%"],
.hp[style*="width: 97%"],
.hp[style*="width: 96%"],
.hp[style*="width: 95%"],
.hp[style*="width: 94%"],
.hp[style*="width: 93%"],
.hp[style*="width: 92%"],
.hp[style*="width: 91%"],
.hp[style*="width: 90%"],
.hp[style*="width: 89%"],
.hp[style*="width: 88%"],
.hp[style*="width: 87%"],
.hp[style*="width: 86%"],
.hp[style*="width: 85%"],
.hp[style*="width: 84%"],
.hp[style*="width: 83%"],
.hp[style*="width: 82%"],
.hp[style*="width: 81%"],
.hp[style*="width: 80%"] {
  background: linear-gradient(90deg, green, lime);
}

.hp[style*="width: 79%"], 
.hp[style*="width: 78%"],
.hp[style*="width: 77%"],
.hp[style*="width: 76%"],
.hp[style*="width: 75%"],
.hp[style*="width: 74%"],
.hp[style*="width: 73%"],
.hp[style*="width: 72%"],
.hp[style*="width: 71%"],
.hp[style*="width: 70%"],
.hp[style*="width: 69%"], 
.hp[style*="width: 68%"],
.hp[style*="width: 67%"],
.hp[style*="width: 66%"],
.hp[style*="width: 65%"],
.hp[style*="width: 64%"],
.hp[style*="width: 63%"],
.hp[style*="width: 62%"],
.hp[style*="width: 61%"],
.hp[style*="width: 60%"] {
  background: linear-gradient(90deg, yellow, lime);
}

.hp[style*="width: 59%"], 
.hp[style*="width: 58%"], 
.hp[style*="width: 57%"], 
.hp[style*="width: 56%"], 
.hp[style*="width: 55%"], 
.hp[style*="width: 54%"], 
.hp[style*="width: 53%"], 
.hp[style*="width: 52%"], 
.hp[style*="width: 51%"], 
.hp[style*="width: 50%"], 
.hp[style*="width: 49%"], 
.hp[style*="width: 48%"], 
.hp[style*="width: 47%"], 
.hp[style*="width: 46%"], 
.hp[style*="width: 45%"], 
.hp[style*="width: 44%"], 
.hp[style*="width: 43%"], 
.hp[style*="width: 42%"], 
.hp[style*="width: 41%"], 
.hp[style*="width: 40%"], 
.hp[style*="width: 39%"], 
.hp[style*="width: 38%"], 
.hp[style*="width: 37%"], 
.hp[style*="width: 36%"], 
.hp[style*="width: 35%"], 
.hp[style*="width: 34%"], 
.hp[style*="width: 33%"], 
.hp[style*="width: 32%"], 
.hp[style*="width: 31%"], 
.hp[style*="width: 30%"] {
  background: linear-gradient(90deg, yellow, orange);
}

.hp[style*="width: 29%"], 
.hp[style*="width: 28%"], 
.hp[style*="width: 27%"], 
.hp[style*="width: 26%"], 
.hp[style*="width: 25%"], 
.hp[style*="width: 24%"], 
.hp[style*="width: 23%"], 
.hp[style*="width: 22%"], 
.hp[style*="width: 21%"], 
.hp[style*="width: 20%"], 
.hp[style*="width: 19%"], 
.hp[style*="width: 18%"], 
.hp[style*="width: 17%"], 
.hp[style*="width: 16%"], 
.hp[style*="width: 15%"], 
.hp[style*="width: 14%"], 
.hp[style*="width: 13%"], 
.hp[style*="width: 12%"], 
.hp[style*="width: 11%"], 
.hp[style*="width: 10%"], 
.hp[style*="width: 9%"], 
.hp[style*="width: 8%"], 
.hp[style*="width: 7%"], 
.hp[style*="width: 6%"], 
.hp[style*="width: 5%"], 
.hp[style*="width: 4%"], 
.hp[style*="width: 3%"], 
.hp[style*="width: 2%"], 
.hp[style*="width: 1%"], 
.hp[style*="width: 0%"] {
  background: linear-gradient(90deg, red, darkred);
}